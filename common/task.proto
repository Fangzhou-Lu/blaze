package acc_runtime;

option java_package = "org.apache.spark.acc_runtime";
option java_outer_classname = "AccMessage";

enum MsgType {
  ACCREQUEST = 0;  
  ACCGRANT = 1;  
  ACCREJECT = 2;  
  ACCFINISH = 3;
  ACCDATA = 4;
  ACCFAILURE = 5;
}

message Data {
	enum Type {
		INT = 0;
		FLOAT = 1;
		LONG = 2;
		DOUBLE = 3;
		STRING = 4;
	};

  enum Flag_type {
    CACHED = 0;
    NOT_CACHED = 1;
  }

  required int32 partition_id = 1;
  optional type data_type = 2;
  optional int64 size = 3;
  optional string path = 4;
  optional int32 offset = 5;
  optional flag_type flag = 6;
}

message TaskMsg {
  required MsgType type = 1;
  optional string acc_id = 2; 
  optional int32 task_id = 3;
  repeated Data data = 4;
}
